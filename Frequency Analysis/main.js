const u = { en: { A: 8.167, B: 1.492, C: 2.782, D: 4.253, E: 12.702, F: 2.228, G: 2.015, H: 6.094, I: 6.966, J: .153, K: .772, L: 4.025, M: 2.406, N: 6.749, O: 7.507, P: 1.929, Q: .095, R: 5.987, S: 6.327, T: 9.056, U: 2.758, V: .978, W: 2.36, X: .15, Y: 1.974, Z: .074 }, es: { A: 12.525, B: 2.215, C: 4.019, D: 5.002, E: 13.681, F: .692, G: 1.008, H: .703, I: 6.247, J: .443, K: .011, L: 4.967, M: 3.157, N: 6.712, O: 8.683, P: 2.51, Q: .877, R: 6.871, S: 7.977, T: 4.632, U: 3.927, V: 1.138, W: .017, X: .215, Y: 1.008, Z: .517 }, fr: { A: 7.636, B: .901, C: 3.26, D: 3.669, E: 14.715, F: 1.066, G: .866, H: .737, I: 7.529, J: .613, K: .074, L: 5.456, M: 2.968, N: 7.095, O: 5.796, P: 2.521, Q: 1.362, R: 6.693, S: 7.948, T: 7.244, U: 6.311, V: 1.838, W: .049, X: .427, Y: .128, Z: .326 }, de: { A: 6.516, B: 1.886, C: 2.732, D: 5.076, E: 16.396, F: 1.656, G: 3.009, H: 4.577, I: 6.55, J: .268, K: 1.417, L: 3.437, M: 2.534, N: 9.776, O: 2.594, P: .67, Q: .018, R: 7.003, S: 7.27, T: 6.154, U: 4.166, V: .846, W: 1.921, X: .034, Y: .039, Z: 1.134 } }, d = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""); let o = {}; d.forEach(e => o[e] = ""); let y = !1; const m = document.getElementById("language-select"), s = document.getElementById("input-text"), C = document.getElementById("standard-chart"), E = document.getElementById("message-chart"), h = document.getElementById("substitution-grid"), f = document.getElementById("decoded-display"), b = document.getElementById("current-lang-label"), w = document.getElementById("reset-btn"), A = document.getElementById("sample-btn"), x = document.getElementById("copy-btn"), L = document.getElementById("sort-btn"), c = { en: "YKTJXTFEN QFQSNLOL OL WQLTR GF ZIT YQEZ ZIQZ, IN QFN UOVTF LZKTZII GY VKIZZTF SQFUXQUT, ETKZQIF STZZTKL QFR EGDWOFQZOGFL GY STZZTKL GEEXK VOZI CQKNIFU YKTJXTFETL. DGKTGCTK, ZITKT OL Q EIQKQEZTKOLZIT ROLZKOXXZOGF GY STZZTKL ZIQZ OL KGXUISH ZIT LQDT YGK QSDGLZ QSS LQDHSLS GY ZIQZ SQFUXQUT.", es: "TS QFQSNLOL RT YKTETFEIOQ LT WQLQ TF TS IEIOG RT JXT, TF EXQSJXOTK LZTDFZOG RT LZFUXQPT TLEKIZG, EOTKZQL LZZKQL N EGDWOFQEOGFTL RT LZZKQL GEEKKTF EGF RTZTKDIFQRL YKTETFEIOQL. QRTDQL, IN XFQ ROLLZKOXUEOGF EQKQEZTOKOLZOEQ RT STZKQL JXT TL QHKGBODQRQDTFZT SQ DOLDQ HQKQ EQLO ZGRGL SGL DXTLZKGL RT STFUXQPT.", fr: "S'QFQSNTT RT YKTJXTEET TLZ WQLTT LXK ST YQOZ JXT, RQFL FG'DHGKZT JXTST TZTFRXT RT SQFUXT TEKOZT, ETKZQOFTL LZZKQL TZ EGDWOFQOLGFL RT LZZKQL LT HKG RXOL TFZ QCTE RTL YKTJXTEETL CQKOQWSTT. RT H战士L, OS TO LZZ XFT ROLLZKOXXZOGF EIQKQEZTKOLLOJXT RT LZZKQL JXO TLZ Q HHKTB HKTL SQ DTTT HGXK HKTLJXT ZGXL S'TEIQFZOSSGFL RT ETZZT SQFUXT.", de: "ROT YKTJXTE MQFQSNLT WQLOTKZ QXY RTK ZQZLQZIT, RQLS OF PTRTD WTSOTXOUTT QWLZIFOZZ ROFLROUHKQEIT, WTLZODDZT WXEIZQX TF XFR AGDWOFQZOGFTF CGT WXEIZQX TF DOZ XFZTKEIORTSOTITF YKTJXTE MTF QXYRKTZTF. RXKRKRTD IOFQXE UXWZ TL TOFT EIQKQAZTKOLLOLEIT CIKZTOX XFU CGT WXEIZQX TF, ROT YXK YQLZ QSSL LZGEIHKGWTF ROTLTK LHKQEIT DQIT ROF RTSTWTS." }; function k() { S(), a(), g() } function S() { h.innerHTML = "", d.forEach(e => { const t = document.createElement("div"); t.className = "sub-item"; const n = document.createElement("div"); n.className = "sub-item-inner"; const r = document.createElement("label"); r.textContent = e; const i = document.createElement("span"); i.className = "sub-arrow", i.textContent = "→"; const l = document.createElement("input"); l.type = "text", l.className = "sub-input", l.maxLength = 1, l.dataset.char = e, l.value = o[e], l.addEventListener("input", p => { const v = p.target.value.toUpperCase(); o[e] = v, v ? l.classList.add("filled") : l.classList.remove("filled"), T() }), n.appendChild(r), n.appendChild(i), n.appendChild(l), t.appendChild(n), h.appendChild(t) }) } function a() { const e = m.value; b.textContent = m.options[m.selectedIndex].text, M(C, u[e]); const t = I(s.value); M(E, t) } function M(e, t) { e.innerHTML = ""; const n = Math.max(...Object.values(t), 1); let r = [...d]; y && r.sort((i, l) => (t[l] || 0) - (t[i] || 0)), r.forEach(i => { const l = t[i] || 0, p = l / n * 100, v = document.createElement("div"); v.className = "bar-container", v.title = `${i}: ${l.toFixed(2)}%`; const F = document.createElement("div"); F.className = "bar", F.style.height = `${p}%`; const Z = document.createElement("span"); Z.className = "bar-label", Z.textContent = i, v.appendChild(F), v.appendChild(Z), e.appendChild(v) }) } function I(e) { const t = {}; d.forEach(r => t[r] = 0); const n = e.toUpperCase().replace(/[^A-Z]/g, ""); if (n.length === 0) return t; for (const r of n) t[r]++; const r = {}; for (const i in t) r[i] = t[i] / n.length * 100; return r } function T() { const e = s.value; f.innerHTML = ""; for (let t = 0; t < e.length; t++) { const n = e[t], r = n.toUpperCase(); if (d.includes(r)) { const i = o[r], l = document.createElement("span"); l.className = "decoded-char", i ? (l.textContent = i, l.classList.add("substituted")) : l.textContent = n, f.appendChild(l) } else { const i = document.createTextNode(n); f.appendChild(i) } } } function g() { m.addEventListener("change", () => { a() }), s.addEventListener("input", () => { a(), T() }), w.addEventListener("click", () => { s.value = "", d.forEach(e => o[e] = ""), S(), a(), T() }), A.addEventListener("click", () => { const e = m.value; s.value = c[e] || c.en, a(), T() }), x.addEventListener("click", () => { const e = f.innerText; navigator.clipboard.writeText(e).then(() => { const t = x.textContent; x.textContent = "Copied!", setTimeout(() => { x.textContent = t }, 2e3) }) }), L.addEventListener("click", () => { y = !y, L.textContent = y ? "Sort: Frequency" : "Sort: A-Z", a() }) } k();
