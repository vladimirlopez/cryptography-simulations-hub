(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function c(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(e){if(e.ep)return;e.ep=!0;const o=c(e);fetch(e.href,o)}})();const g="ABCDEFGHIJKLMNOPQRSTUVWXYZ";let i=3,x=!0,b=!1,v=0;const E=document.getElementById("message-input"),O=document.getElementById("shift-slider"),T=document.getElementById("shift-value"),p=document.getElementById("mode-encode"),y=document.getElementById("mode-decode"),X=document.getElementById("output-text"),B=document.getElementById("output-label"),f=document.getElementById("caesar-wheel-svg"),w=document.getElementById("char-current"),l=document.getElementById("btn-copy"),M=document.getElementById("modal-learn"),P=document.getElementById("modal-challenge"),G=document.getElementById("btn-learn"),U=document.getElementById("btn-challenge"),W=document.querySelectorAll(".close-modal"),z=document.getElementById("challenge-cipher"),Y=document.getElementById("challenge-input"),K=document.getElementById("btn-submit-challenge"),m=document.getElementById("challenge-feedback"),V=document.getElementById("hint-shift"),L=[{cipher:"KHOOR ZRUOG",shift:3,answer:"HELLO WORLD"},{cipher:"GR QRW WUXVW BRXU BHV",shift:3,answer:"DO NOT TRUST YOUR EYES"},{cipher:"AXGZ PZKDA",shift:6,answer:"STAY SHARP"}];let d=0;function Z(){C(),u(),j()}function F(t,n,c=!0){return c||(n=(26-n)%26),t.toUpperCase().split("").map(s=>{const e=g.indexOf(s);return e===-1?s:g[(e+n)%26]}).join("")}function u(){const t=E.value,n=F(t,i,x);X.textContent=n||"Result will appear here...",w.textContent=t.length,t.length>120&&(E.value=t.substring(0,120),w.textContent=120)}function C(){let e="";e+='<circle cx="200" cy="200" r="180" fill="var(--wheel-outer)" stroke="var(--border-color)" stroke-width="2" />';for(let r=0;r<26;r++){const h=(r*13.846153846153847-90)*(Math.PI/180),I=200+155*Math.cos(h),a=200+155*Math.sin(h);e+=`<text x="${I}" y="${a}" text-anchor="middle" dominant-baseline="middle" fill="var(--text-main)" font-family="var(--font-mono)" font-weight="bold" font-size="14">${g[r]}</text>`}e+=`
        <defs>
            <path id="outerLabelPath" d="M 30,200 a 170,170 0 0,0 340,0" fill="none" />
        </defs>
        <text font-family="var(--font-body)" font-size="8" font-weight="bold" fill="var(--text-dim)" opacity="0.3">
            <textPath href="#outerLabelPath" startOffset="50%" text-anchor="middle">CIPHERTEXT (OUTER RING)</textPath>
        </text>
    `;const o=-(i*(360/26));e+=`<g id="inner-wheel" style="transform-origin: center; transform: rotate(${o}deg); transition: transform 0.3s ease-out;">`,e+='<circle cx="200" cy="200" r="130" fill="var(--wheel-inner)" stroke="var(--border-color)" stroke-width="2" />';for(let r=0;r<26;r++){const h=(r*13.846153846153847-90)*(Math.PI/180),a=((r+.5)*(360/26)-90)*(Math.PI/180),S=200+130*Math.cos(a),H=200+130*Math.sin(a),N=200+90*Math.cos(a),D=200+90*Math.sin(a);e+=`<line x1="${S}" y1="${H}" x2="${N}" y2="${D}" stroke="var(--border-color)" stroke-width="1" opacity="0.3" />`;const R=200+105*Math.cos(h),$=200+105*Math.sin(h);e+=`<text x="${R}" y="${$}" text-anchor="middle" dominant-baseline="middle" fill="var(--accent-primary)" font-family="var(--font-mono)" font-weight="bold" font-size="14" transform="rotate(${-o}, ${R}, ${$})" style="transition: transform 0.3s ease-out;">${g[r]}</text>`}e+=`
        <defs>
            <path id="innerLabelPath" d="M 130,200 a 70,70 0 0,0 140,0" fill="none" />
        </defs>
        <text font-family="var(--font-body)" font-size="8" font-weight="bold" fill="var(--accent-primary)" opacity="0.4" transform="rotate(${-o}, 200, 200)" style="transition: transform 0.3s ease-out;">
            <textPath href="#innerLabelPath" startOffset="50%" text-anchor="middle">PLAINTEXT (INNER RING)</textPath>
        </text>
    `,e+="</g>",e+='<circle cx="200" cy="200" r="15" fill="var(--bg-dark)" stroke="var(--border-color)" />',f.innerHTML=e}function j(){E.addEventListener("input",u),O.addEventListener("input",t=>{i=parseInt(t.target.value),T.textContent=i,C(),u()}),p.addEventListener("click",()=>{x=!0,p.classList.add("active"),y.classList.remove("active"),B.textContent="Encoded Message",u()}),y.addEventListener("click",()=>{x=!1,y.classList.add("active"),p.classList.remove("active"),B.textContent="Decoded Message",u()}),l.addEventListener("click",()=>{const t=X.textContent;if(t&&t!=="Result will appear here..."){navigator.clipboard.writeText(t);const n=l.textContent;l.textContent="Copied!",l.classList.add("special"),setTimeout(()=>{l.textContent=n,l.classList.remove("special")},2e3)}}),G.addEventListener("click",()=>M.classList.remove("hidden")),U.addEventListener("click",()=>{k(),P.classList.remove("hidden")}),W.forEach(t=>{t.addEventListener("click",()=>{M.classList.add("hidden"),P.classList.add("hidden")})}),f.addEventListener("mousedown",q),window.addEventListener("mousemove",Q),window.addEventListener("mouseup",J),K.addEventListener("click",_)}function q(t){b=!0;const n=f.getBoundingClientRect(),c=t.clientX-n.left-200,s=t.clientY-n.top-200;v=Math.atan2(s,c),f.style.cursor="grabbing"}function Q(t){if(!b)return;const n=f.getBoundingClientRect(),c=t.clientX-n.left-200,s=t.clientY-n.top-200,e=Math.atan2(s,c);let o=(e-v)*(180/Math.PI);if(Math.abs(o)>10){const r=Math.round(o/13.846153846153847);r!==0&&(i=(i-r+26)%26,O.value=i,T.textContent=i,v=e,C(),u())}}function J(){b=!1,f.style.cursor="grab"}function k(){const t=L[d];z.textContent=t.cipher,Y.value="",m.textContent="",V.textContent=d===0?"3":"?"}function _(){const t=L[d];Y.value.trim().toUpperCase()===t.answer?(m.innerHTML="üéâ <span style='color: #3fb950;'>Correct!</span>",setTimeout(()=>{d=(d+1)%L.length,d===0?m.textContent="You've completed all challenges! Great job.":k()},2e3)):m.innerHTML="‚ùå <span style='color: #f85149;'>Try again!</span> Check your shift."}Z();
